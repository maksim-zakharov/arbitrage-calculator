## Фича: 1) все значения во всех полях округлять до 2 знаков после запятой с помощью Intl…

## Структурированные требования и задачи  
На основании представленного контекста и поступившего запроса ниже приведены соответствующие функциональные и нефункциональные требования, а также список конкретных задач для реализации необходимых изменений.

---

## Требования

### Функциональные требования:

1. **Округление значений полей**
   - Все числовые поля в интерфейсе приложения (как для отдельных инструментов, так и результатов вычислений) должны автоматически округляться до двух десятичных знаков после запятой.
   - Округление должно выполняться через механизм локализации с использованием объекта `Intl.NumberFormat`.
   
2. **Изменение экрана калькулятора**
   - Карточка с предложением посмотреть графики («Хотите графики?») должна быть удалена из текущего представления страницы.
   - Вместо неё должна размещаться ссылка на сервис котировок XPBee, предоставляющая актуальные данные.
   - Текущая отдельная ссылка на котировки XPBee должна быть убрана.

### Нефункциональные требования:

- Интерфейс должен корректно адаптироваться к новым изменениям без потери юзабилити.
- Пользователи не должны замечать снижение производительности системы после внесения указанных изменений.
- Модификация функционала не должна нарушать работу существующих компонентов приложения.

---

## Задачи

Для выполнения требований сформулированы следующие конкретные задачи:

1. Реализовать автоматическое округление значений до двух знаков после запятой с применением функции `Intl.NumberFormat` в соответствующих местах приложения.
   - Определить компоненты и места, где применяются числовые значения, и внедрить функцию округления там, где она необходима.

2. Удалить карточку с предложением просмотра графиков («Хотите графики?»).
   - Найти и удалить соответствующий компонент в файле структуры проекта.

3. Разместить новую ссылку на сервис котировок XPBee взамен удалённой карточки.
   - Подставить соответствующую ссылку непосредственно в интерфейс страницы.

4. ��роверить наличие текущей отдельной ссылки на котировки XPBee и удалить её, чтобы избежать дублирования ссылок.

5. Провести интеграционное тестирование после внесения изменений, убедиться, что функциональность осталась неизменной, а новый функционал работает корректно.

---

Таким образом, предложенные изменения будут реализованы поэтапно и аккуратно интегрированы в существующий код проекта.

---

## Фича: Добавить тройники GOLD-3.26/ED-3.26/XAUEUR_xp и SILV-3.26/ED-3.26/XAGEUR_xp…

Добавить тройники GOLD-3.26/ED-3.26/XAUEUR_xp и SILV-3.26/ED-3.26/XAGEUR_xp

---

## Фича: Добавить тройники GOLD-3.26/ED-3.26/XAUEUR_xp и SILV-3.26/ED-3.26/XAGEUR_xp…

## Проект arbitrage-calculator  
Добавление новых троек (тройников): GOLD-3.26/ED-3.26/XAUEUR_xp и SILV-3.26/ED-3.26/XAGEUR_xp

---

## Требования

### Функциональные требования

1. **Расчёт коэффициентов (ratio)**
   - Для новых троек автоматически рассчитываются коэффициентные отношения на основе текущих рыночных котировок (EUR, USD, CNY, UCNY, EURUSD, EURCNY, GOLD).
   - Коэффициент пересчета применяется только при наличии актуальных данных от внешних источников (API MOEX).
   
2. **Поддержка экспортной версии (_xp)**
   - Инструменты XAUEUR_xp и XAGEUR_xp воспринимаются системой как иностранные активы и обрабатываются отдельно от российских активов (GOLD-3.26, ED-3.26).
   - Применение функции перевода курса активируется при любом взаимодействии с инструментами, имеющими суффикс "_xp".
   
3. **Интерпретация тикеров**
   - Система должна корректно интерпретировать новые обозначения тикеров: GOLD-3.26, ED-3.26, XAUEUR_xp, XAGEUR_xp.
   - Фьючерсы (GOLD-3.26, ED-3.26) требуют учёта срока экспирации через функцию `getFuturesSuffix()`.
   
4. **Сохранение текущего состояния**
   - Данные по новым тройникам (инструмент, название, коэффициент, значение) автоматически сохраняются в localStorage браузера.
   - Информация доступна после перезагрузки приложения без потери ранее внесённых изменений.
   
5. **Адаптация механизма перевеса на MOEX**
   - Ползунок для установки перевеса ("перевес на MOEX") корректно работает и учитывается при расчетах новых тройников, влияя исключительно на российские активы внутри каждой тройки.
   
6. **Идентификация новой функциональности**
   - Необходимо обеспечить видимость добавленных тройников на основном экране интерфейса и предусмотреть визуальное оформление элементов управления новыми инструментами.

7. **Совместимость с существующими функциями**
   - Новый функционал не нарушает работы существующих компонентов и функций (отображение котировок, расчёт лотов, сохранение состояний).

### Нефункциональные требования

1. **Производительность**
   - Время отклика системы при работе с новыми тройниками должно оставаться приемлемым (<1 ��екунда на обновление и расчёт значений).
   
2. **Безопасность**
   - Ограничивать доступ пользователей к функционалу изменения внутренней структуры API и сохранения локальных данных.
   
3. **Масштабируемость**
   - Реализация нового функционала должна учитывать возможные будущие расширения (добавления новых инструментов и типов данных).
   
4. **Удобство использования**
   - Пользователи должны интуитивно понимать механизм добавления и взаимодействия с новыми тройниками без значительных усилий.

---

## Задачи

1. Добавить новую группу инструментов в конфигурационные файлы `initialTriples` в файле `ArbitrageCalculator.tsx`:
   - Имена новых тройников: `"GOLD-3.26/ED-3.26/XAUEUR_xp"` и `"SILV-3.26/ED-3.26/XAGEUR_xp"`.
   - Прописать соответствующие поля: тип `'triple'`, идентификатор, набор инструментов с именами, значениями и коэффициентами.

2. Интегрировать функциональность расчета коэффициента пересчета (ratio) для вновь добавляемых тройников:
   - Провести вычисления коэффициентов для указанных тройников с использованием текущей рыночной стоимости соответствующих инструментов.
   - Автоматически запускать перерасчет коэффициентов при получении свежих данных котировок с биржи MOEX.

3. Настроить обработку фьючерсов:
   - Применять автоматическое определение срока экспирации для инструментов GOLD-3.26 и ED-3.26 с помощью вызова функции `getFuturesSuffix()`.
   - Передавать полученные коды в API-запросы для получения актуальных данных.

4. Обеспечить хранение и восстановление данных:
   - Подключить новый функционал хранения значений инструментов новых тройников в localStorage.
   - Создать механизмы восстановления предыдущих значений инструментов при повторном открытии страницы.

5. Адаптация механизма "перевес на MOEX":
   - Включить поддержку данного механизма для двух новых тройников.
   - Продумать реализацию алгоритма учета перевеса исключительно для российских активов внутри тройки.

6. Протестировать работу новых тройников:
   - Проверить корректную интерпретацию названий инструментов и кодов экспираций.
   - Оценить точность расчетов коэффициентов и их влияние на результаты расчета объемов инструментов.
   - Убедиться в корректности поведения механизма перевеса и сохранности данных в браузере.

7. Оформить интерфейс новых тройников:
   - Разработать элементы оформления (карточки, кнопки, индикаторы статуса) для удобного восприятия пользователями.
   - Предоставить наглядную инструкцию пользователям по использованию нового функционала.

8. Документация и комментарии:
   - Описать процесс интеграции новых тройников в документацию проекта.
   - Оставлять поясняющие комментарии в исходном коде для упрощения дальнейшего сопровождения и модификации функционала.

9. Завершение работ:
   - Выполнить финальное тестирование всей системы после внедрения нового функционала.
   - Подготовить отчет о проделанной работе и описание выполненных действий.

--- 

Эти задачи обеспечивают полное внедрение и интеграцию новых тройников в систему, сохраняя совместимость с уже реализованным функционалом и обеспечивая удобство работы пользователей.

---

